webpackJsonp([3],{249:function(module,exports,__webpack_require__){eval("/* WEBPACK VAR INJECTION */(function(module) {'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _index = __webpack_require__(21);\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _index3 = __webpack_require__(17);\n\nvar _index4 = _interopRequireDefault(_index3);\n\nvar _react2 = __webpack_require__(5);\n\nvar _react3 = _interopRequireDefault(_react2);\n\nvar _index5 = __webpack_require__(18);\n\nvar _index6 = _interopRequireDefault(_index5);\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _reactRouter = __webpack_require__(39);\n\nvar _reactRedux = __webpack_require__(24);\n\nvar _Tool = __webpack_require__(29);\n\nvar _modules = __webpack_require__(36);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _components = {\n    List: {\n        displayName: 'List'\n    },\n    ListItem: {\n        displayName: 'ListItem'\n    },\n    Main: {\n        displayName: 'Main'\n    }\n};\n\nvar _mygitPxqNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({\n    filename: '/mygit/pxq/src/Component/chooseProducts.jsx',\n    components: _components,\n    locals: [module],\n    imports: [_react3.default]\n});\n\nvar _mygitPxqNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({\n    filename: '/mygit/pxq/src/Component/chooseProducts.jsx',\n    components: _components,\n    locals: [],\n    imports: [_react3.default, _index2.default]\n});\n\nfunction _wrapComponent(id) {\n    return function (Component) {\n        return _mygitPxqNode_modulesReactTransformHmrLibIndexJs2(_mygitPxqNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);\n    };\n}\n\nvar List = _wrapComponent('List')(function (_Component) {\n    _inherits(List, _Component);\n\n    function List() {\n        _classCallCheck(this, List);\n\n        return _possibleConstructorReturn(this, (List.__proto__ || Object.getPrototypeOf(List)).apply(this, arguments));\n    }\n\n    _createClass(List, [{\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps, nextState) {\n            return !(this.props === nextProps) || !(this.state === nextState);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            return _react3.default.createElement(\n                'div',\n                null,\n                _react3.default.createElement(\n                    'ul',\n                    { className: 'product_list_ul' },\n                    this.props.list.map(function (item, index) {\n                        return _react3.default.createElement(ListItem, _extends({ key: index }, item, { index: index }));\n                    })\n                )\n            );\n        }\n    }]);\n\n    return List;\n}(_react2.Component));\n\nvar ListItem = _wrapComponent('ListItem')(function (_Component2) {\n    _inherits(ListItem, _Component2);\n\n    function ListItem(props, context) {\n        _classCallCheck(this, ListItem);\n\n        var _this2 = _possibleConstructorReturn(this, (ListItem.__proto__ || Object.getPrototypeOf(ListItem)).call(this, props, context));\n\n        _this2.state = {\n            productCount: _this2.props.num,\n            chooseState: _this2.props.chooseState\n        };\n\n        _this2.getProductCount = function (type) {\n            // 商品数量加减时进行计算\n            if (_this2.state.chooseState) {\n                var num = _this2.state.productCount;\n                if (type == 'reduce' && num > 0) {\n                    num = num - 1;\n                    _this2.setState({\n                        productCount: num\n                    });\n                } else if (type == 'add') {\n                    num = num + 1;\n                    _this2.setState({\n                        productCount: num\n                    });\n                }\n                _this2.context.recordState(_this2.props.id, _this2.state.chooseState, num, _this2.props.index);\n            }\n        };\n\n        _this2.handleChange = function (event) {\n            // input值改变的时候进行判断赋值  \n            if (_this2.state.chooseState) {\n                var newValue = event.target.value;\n                newValue = Number(newValue.replace(/\\D+/gi, ''));\n                _this2.setState({\n                    productCount: newValue\n                });\n                _this2.context.recordState(_this2.props.id, _this2.state.chooseState, newValue, _this2.props.index);\n            }\n        };\n\n        _this2.changeState = function () {\n            var state = !_this2.state.chooseState;\n            _this2.setState({ chooseState: state });\n            _this2.context.recordState(_this2.props.id, state, _this2.state.productCount, _this2.props.index);\n        };\n\n        return _this2;\n    }\n\n    _createClass(ListItem, [{\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps, nextState) {\n            return !(this.props === nextProps) || !(this.state === nextState);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _props = this.props;\n            var productName = _props.productName;\n            var id = _props.id;\n\n            var productCount = this.state.productCount;\n            return _react3.default.createElement(\n                'li',\n                { className: 'chooseProduct_item clear' },\n                _react3.default.createElement(\n                    'div',\n                    { className: 'chooseItem_left ellips left ' + (this.state.chooseState == true ? 'choosed' : ''), onClick: this.changeState },\n                    ' ',\n                    productName\n                ),\n                _react3.default.createElement(\n                    'div',\n                    { className: 'chooseItem_right right' },\n                    _react3.default.createElement('button', { disabled: productCount > 0 ? '' : 'disabled', className: (productCount > 0 ? 'reduce' : 'reduce_no') + ' button_style ', onClick: this.getProductCount.bind(this, 'reduce') }),\n                    _react3.default.createElement('input', { type: 'text', className: 'product_num', maxLength: '5', value: productCount, onChange: this.handleChange }),\n                    _react3.default.createElement('button', { className: 'add button_style', onClick: this.getProductCount.bind(this, 'add') })\n                )\n            );\n        }\n    }]);\n\n    return ListItem;\n}(_react2.Component));\n\nListItem.contextTypes = {\n    recordState: _react3.default.PropTypes.any\n};\n\nvar Main = _wrapComponent('Main')(function (_Component3) {\n    _inherits(Main, _Component3);\n\n    function Main(props, context) {\n        _classCallCheck(this, Main);\n\n        var _this3 = _possibleConstructorReturn(this, (Main.__proto__ || Object.getPrototypeOf(Main)).call(this, props, context));\n\n        _this3.state = {\n            productList: [], //商品列表\n            params: '', //传入的参数\n            shouldUpdata: false, //组件是否需要更新\n            left: 0,\n            num: 0,\n            director: -1,\n            requestID: null,\n            clientWidth: 0,\n            moving: false\n        };\n\n        _this3.productsState = function (id, chooseState, num, index) {\n\n            _this3.state.productList[index].chooseState = chooseState;\n            _this3.state.productList[index].num = num;\n            _this3.props.saveProductlist(_this3.state.productList);\n        };\n\n        _this3.move = function () {\n            // 做个动画效果试试\n            _this3.state.clientWidth = document.documentElement.clientWidth;\n            _this3.state.director = _this3.state.director * -1;\n            cancelAnimationFrame(_this3.state.requestID);\n            _this3.state.moving = true;\n            _this3.getMove();\n        };\n\n        _this3.getMove = function () {\n            _this3.state.requestID = requestAnimationFrame(function () {\n                _this3.state.num = _this3.state.director * 4 + _this3.state.num;\n                _this3.setState({ left: _this3.state.num + 'px' });\n                if (_this3.state.num >= _this3.state.clientWidth - 100) {\n                    _this3.state.director = _this3.state.director * -1;\n                } else if (_this3.state.num <= 0) {\n                    _this3.state.director = _this3.state.director * -1;\n                }\n                _this3.getMove();\n            });\n        };\n\n        return _this3;\n    }\n\n    _createClass(Main, [{\n        key: 'getChildContext',\n        value: function getChildContext() {\n            return {\n                recordState: this.props.recordState\n            };\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            var _this4 = this;\n\n            //console.log(nextProps)\n            this.state.shouldUpdata = false;\n            if (this.props !== nextProps) {\n                var data = nextProps.state.data;\n                if (nextProps.producRecord.productList && this.state.productList.length == 0) {\n                    this.state.shouldUpdata = true;\n                    this.state.productList = nextProps.producRecord.productList;\n                } else if (data && data.data && data.data.data && this.state.productList.length == 0) {\n                    this.state.shouldUpdata = true;\n                    var list = data.data.data;\n                    this.props.newProductData(list);\n                    list.forEach(function (item, index) {\n                        _this4.state.productList[index] = {};\n                        _this4.state.productList[index]['productName'] = item.product_name;\n                        _this4.state.productList[index]['chooseState'] = false;\n                        _this4.state.productList[index]['id'] = item.product_id;\n                        _this4.state.productList[index]['num'] = 1;\n                    });\n                }\n\n                if (nextProps.producRecord.id) {\n                    var producRecord = nextProps.producRecord;\n\n                    this.productsState(producRecord.id, producRecord.chooseState, producRecord.num, producRecord.index);\n                }\n            }\n        }\n    }, {\n        key: 'componentWillUpdate',\n        value: function componentWillUpdate(nextProps, nextState) {\n            //\n        }\n    }, {\n        key: 'componentWillMount',\n        value: function componentWillMount() {\n            this.state.params = this.props.location.search;\n        }\n    }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps, nextState) {\n            return this.state.shouldUpdata || this.state.moving;\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            cancelAnimationFrame(this.state.requestID);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var MoveDiv = { position: 'fixed', backgroundColor: 'red', height: '100px', width: '100px', zIndex: 99999, left: this.state.left, bottom: '0' };\n            return _react3.default.createElement(\n                'div',\n                { className: 'component_container' },\n                _react3.default.createElement('div', { style: MoveDiv, onClick: this.move }),\n                _react3.default.createElement(_modules.Header, { goback: true, title: '\\u9500\\u552E\\u5546\\u54C1', save: true, params: this.state.params }),\n                this.state.productList.length > 0 ? _react3.default.createElement(List, { list: this.state.productList }) : null\n            );\n        }\n    }]);\n\n    return Main;\n}(_react2.Component));\n\nMain.childContextTypes = {\n    recordState: _react3.default.PropTypes.any\n};\n\nexports.default = (0, _modules.template)({\n    id: 'chooseProducts', //应用关联使用的redux\n    component: Main, //接收数据的组件入口\n    url: '/sales/sales/productList',\n    data: {}\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)(module)))//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudC9jaG9vc2VQcm9kdWN0cy5qc3g/ZmU5MyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9pbmRleCA9IHJlcXVpcmUoJy9teWdpdC9weHEvbm9kZV9tb2R1bGVzL3JlZGJveC1yZWFjdC9saWIvaW5kZXguanMnKTtcblxudmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleCk7XG5cbnZhciBfaW5kZXgzID0gcmVxdWlyZSgnL215Z2l0L3B4cS9ub2RlX21vZHVsZXMvcmVhY3QtdHJhbnNmb3JtLWNhdGNoLWVycm9ycy9saWIvaW5kZXguanMnKTtcblxudmFyIF9pbmRleDQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleDMpO1xuXG52YXIgX3JlYWN0MiA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QyKTtcblxudmFyIF9pbmRleDUgPSByZXF1aXJlKCcvbXlnaXQvcHhxL25vZGVfbW9kdWxlcy9yZWFjdC10cmFuc2Zvcm0taG1yL2xpYi9pbmRleC5qcycpO1xuXG52YXIgX2luZGV4NiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4NSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3RSb3V0ZXIgPSByZXF1aXJlKCdyZWFjdC1yb3V0ZXInKTtcblxudmFyIF9yZWFjdFJlZHV4ID0gcmVxdWlyZSgncmVhY3QtcmVkdXgnKTtcblxudmFyIF9Ub29sID0gcmVxdWlyZSgnLi4vQ29uZmlnL1Rvb2wnKTtcblxudmFyIF9tb2R1bGVzID0gcmVxdWlyZSgnLi9jb21tb24vbW9kdWxlcycpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBfY29tcG9uZW50cyA9IHtcbiAgICBMaXN0OiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnTGlzdCdcbiAgICB9LFxuICAgIExpc3RJdGVtOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnTGlzdEl0ZW0nXG4gICAgfSxcbiAgICBNYWluOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnTWFpbidcbiAgICB9XG59O1xuXG52YXIgX215Z2l0UHhxTm9kZV9tb2R1bGVzUmVhY3RUcmFuc2Zvcm1IbXJMaWJJbmRleEpzMiA9ICgwLCBfaW5kZXg2LmRlZmF1bHQpKHtcbiAgICBmaWxlbmFtZTogJy9teWdpdC9weHEvc3JjL0NvbXBvbmVudC9jaG9vc2VQcm9kdWN0cy5qc3gnLFxuICAgIGNvbXBvbmVudHM6IF9jb21wb25lbnRzLFxuICAgIGxvY2FsczogW21vZHVsZV0sXG4gICAgaW1wb3J0czogW19yZWFjdDMuZGVmYXVsdF1cbn0pO1xuXG52YXIgX215Z2l0UHhxTm9kZV9tb2R1bGVzUmVhY3RUcmFuc2Zvcm1DYXRjaEVycm9yc0xpYkluZGV4SnMyID0gKDAsIF9pbmRleDQuZGVmYXVsdCkoe1xuICAgIGZpbGVuYW1lOiAnL215Z2l0L3B4cS9zcmMvQ29tcG9uZW50L2Nob29zZVByb2R1Y3RzLmpzeCcsXG4gICAgY29tcG9uZW50czogX2NvbXBvbmVudHMsXG4gICAgbG9jYWxzOiBbXSxcbiAgICBpbXBvcnRzOiBbX3JlYWN0My5kZWZhdWx0LCBfaW5kZXgyLmRlZmF1bHRdXG59KTtcblxuZnVuY3Rpb24gX3dyYXBDb21wb25lbnQoaWQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKENvbXBvbmVudCkge1xuICAgICAgICByZXR1cm4gX215Z2l0UHhxTm9kZV9tb2R1bGVzUmVhY3RUcmFuc2Zvcm1IbXJMaWJJbmRleEpzMihfbXlnaXRQeHFOb2RlX21vZHVsZXNSZWFjdFRyYW5zZm9ybUNhdGNoRXJyb3JzTGliSW5kZXhKczIoQ29tcG9uZW50LCBpZCksIGlkKTtcbiAgICB9O1xufVxuXG52YXIgTGlzdCA9IF93cmFwQ29tcG9uZW50KCdMaXN0JykoZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoTGlzdCwgX0NvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBMaXN0KCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTGlzdCk7XG5cbiAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChMaXN0Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTGlzdCkpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhMaXN0LCBbe1xuICAgICAgICBrZXk6ICdzaG91bGRDb21wb25lbnRVcGRhdGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gISh0aGlzLnByb3BzID09PSBuZXh0UHJvcHMpIHx8ICEodGhpcy5zdGF0ZSA9PT0gbmV4dFN0YXRlKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBfcmVhY3QzLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIF9yZWFjdDMuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAndWwnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2R1Y3RfbGlzdF91bCcgfSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5saXN0Lm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QzLmRlZmF1bHQuY3JlYXRlRWxlbWVudChMaXN0SXRlbSwgX2V4dGVuZHMoeyBrZXk6IGluZGV4IH0sIGl0ZW0sIHsgaW5kZXg6IGluZGV4IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIExpc3Q7XG59KF9yZWFjdDIuQ29tcG9uZW50KSk7XG5cbnZhciBMaXN0SXRlbSA9IF93cmFwQ29tcG9uZW50KCdMaXN0SXRlbScpKGZ1bmN0aW9uIChfQ29tcG9uZW50Mikge1xuICAgIF9pbmhlcml0cyhMaXN0SXRlbSwgX0NvbXBvbmVudDIpO1xuXG4gICAgZnVuY3Rpb24gTGlzdEl0ZW0ocHJvcHMsIGNvbnRleHQpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExpc3RJdGVtKTtcblxuICAgICAgICB2YXIgX3RoaXMyID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKExpc3RJdGVtLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTGlzdEl0ZW0pKS5jYWxsKHRoaXMsIHByb3BzLCBjb250ZXh0KSk7XG5cbiAgICAgICAgX3RoaXMyLnN0YXRlID0ge1xuICAgICAgICAgICAgcHJvZHVjdENvdW50OiBfdGhpczIucHJvcHMubnVtLFxuICAgICAgICAgICAgY2hvb3NlU3RhdGU6IF90aGlzMi5wcm9wcy5jaG9vc2VTdGF0ZVxuICAgICAgICB9O1xuXG4gICAgICAgIF90aGlzMi5nZXRQcm9kdWN0Q291bnQgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgLy8g5ZWG5ZOB5pWw6YeP5Yqg5YeP5pe26L+b6KGM6K6h566XXG4gICAgICAgICAgICBpZiAoX3RoaXMyLnN0YXRlLmNob29zZVN0YXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG51bSA9IF90aGlzMi5zdGF0ZS5wcm9kdWN0Q291bnQ7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ3JlZHVjZScgJiYgbnVtID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBudW0gPSBudW0gLSAxO1xuICAgICAgICAgICAgICAgICAgICBfdGhpczIuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdENvdW50OiBudW1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICdhZGQnKSB7XG4gICAgICAgICAgICAgICAgICAgIG51bSA9IG51bSArIDE7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzMi5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0Q291bnQ6IG51bVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMyLmNvbnRleHQucmVjb3JkU3RhdGUoX3RoaXMyLnByb3BzLmlkLCBfdGhpczIuc3RhdGUuY2hvb3NlU3RhdGUsIG51bSwgX3RoaXMyLnByb3BzLmluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBfdGhpczIuaGFuZGxlQ2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAvLyBpbnB1dOWAvOaUueWPmOeahOaXtuWAmei/m+ihjOWIpOaWrei1i+WAvCAgXG4gICAgICAgICAgICBpZiAoX3RoaXMyLnN0YXRlLmNob29zZVN0YXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5ld1ZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gTnVtYmVyKG5ld1ZhbHVlLnJlcGxhY2UoL1xcRCsvZ2ksICcnKSk7XG4gICAgICAgICAgICAgICAgX3RoaXMyLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdENvdW50OiBuZXdWYWx1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIF90aGlzMi5jb250ZXh0LnJlY29yZFN0YXRlKF90aGlzMi5wcm9wcy5pZCwgX3RoaXMyLnN0YXRlLmNob29zZVN0YXRlLCBuZXdWYWx1ZSwgX3RoaXMyLnByb3BzLmluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBfdGhpczIuY2hhbmdlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc3RhdGUgPSAhX3RoaXMyLnN0YXRlLmNob29zZVN0YXRlO1xuICAgICAgICAgICAgX3RoaXMyLnNldFN0YXRlKHsgY2hvb3NlU3RhdGU6IHN0YXRlIH0pO1xuICAgICAgICAgICAgX3RoaXMyLmNvbnRleHQucmVjb3JkU3RhdGUoX3RoaXMyLnByb3BzLmlkLCBzdGF0ZSwgX3RoaXMyLnN0YXRlLnByb2R1Y3RDb3VudCwgX3RoaXMyLnByb3BzLmluZGV4KTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gX3RoaXMyO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhMaXN0SXRlbSwgW3tcbiAgICAgICAga2V5OiAnc2hvdWxkQ29tcG9uZW50VXBkYXRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuICEodGhpcy5wcm9wcyA9PT0gbmV4dFByb3BzKSB8fCAhKHRoaXMuc3RhdGUgPT09IG5leHRTdGF0ZSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcztcbiAgICAgICAgICAgIHZhciBwcm9kdWN0TmFtZSA9IF9wcm9wcy5wcm9kdWN0TmFtZTtcbiAgICAgICAgICAgIHZhciBpZCA9IF9wcm9wcy5pZDtcblxuICAgICAgICAgICAgdmFyIHByb2R1Y3RDb3VudCA9IHRoaXMuc3RhdGUucHJvZHVjdENvdW50O1xuICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDMuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdsaScsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjaG9vc2VQcm9kdWN0X2l0ZW0gY2xlYXInIH0sXG4gICAgICAgICAgICAgICAgX3JlYWN0My5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2Nob29zZUl0ZW1fbGVmdCBlbGxpcHMgbGVmdCAnICsgKHRoaXMuc3RhdGUuY2hvb3NlU3RhdGUgPT0gdHJ1ZSA/ICdjaG9vc2VkJyA6ICcnKSwgb25DbGljazogdGhpcy5jaGFuZ2VTdGF0ZSB9LFxuICAgICAgICAgICAgICAgICAgICAnICcsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3ROYW1lXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QzLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY2hvb3NlSXRlbV9yaWdodCByaWdodCcgfSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0My5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHsgZGlzYWJsZWQ6IHByb2R1Y3RDb3VudCA+IDAgPyAnJyA6ICdkaXNhYmxlZCcsIGNsYXNzTmFtZTogKHByb2R1Y3RDb3VudCA+IDAgPyAncmVkdWNlJyA6ICdyZWR1Y2Vfbm8nKSArICcgYnV0dG9uX3N0eWxlICcsIG9uQ2xpY2s6IHRoaXMuZ2V0UHJvZHVjdENvdW50LmJpbmQodGhpcywgJ3JlZHVjZScpIH0pLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QzLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JywgY2xhc3NOYW1lOiAncHJvZHVjdF9udW0nLCBtYXhMZW5ndGg6ICc1JywgdmFsdWU6IHByb2R1Y3RDb3VudCwgb25DaGFuZ2U6IHRoaXMuaGFuZGxlQ2hhbmdlIH0pLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QzLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywgeyBjbGFzc05hbWU6ICdhZGQgYnV0dG9uX3N0eWxlJywgb25DbGljazogdGhpcy5nZXRQcm9kdWN0Q291bnQuYmluZCh0aGlzLCAnYWRkJykgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIExpc3RJdGVtO1xufShfcmVhY3QyLkNvbXBvbmVudCkpO1xuXG5MaXN0SXRlbS5jb250ZXh0VHlwZXMgPSB7XG4gICAgcmVjb3JkU3RhdGU6IF9yZWFjdDMuZGVmYXVsdC5Qcm9wVHlwZXMuYW55XG59O1xuXG52YXIgTWFpbiA9IF93cmFwQ29tcG9uZW50KCdNYWluJykoZnVuY3Rpb24gKF9Db21wb25lbnQzKSB7XG4gICAgX2luaGVyaXRzKE1haW4sIF9Db21wb25lbnQzKTtcblxuICAgIGZ1bmN0aW9uIE1haW4ocHJvcHMsIGNvbnRleHQpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1haW4pO1xuXG4gICAgICAgIHZhciBfdGhpczMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoTWFpbi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1haW4pKS5jYWxsKHRoaXMsIHByb3BzLCBjb250ZXh0KSk7XG5cbiAgICAgICAgX3RoaXMzLnN0YXRlID0ge1xuICAgICAgICAgICAgcHJvZHVjdExpc3Q6IFtdLCAvL+WVhuWTgeWIl+ihqFxuICAgICAgICAgICAgcGFyYW1zOiAnJywgLy/kvKDlhaXnmoTlj4LmlbBcbiAgICAgICAgICAgIHNob3VsZFVwZGF0YTogZmFsc2UsIC8v57uE5Lu25piv5ZCm6ZyA6KaB5pu05pawXG4gICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgbnVtOiAwLFxuICAgICAgICAgICAgZGlyZWN0b3I6IC0xLFxuICAgICAgICAgICAgcmVxdWVzdElEOiBudWxsLFxuICAgICAgICAgICAgY2xpZW50V2lkdGg6IDAsXG4gICAgICAgICAgICBtb3Zpbmc6IGZhbHNlXG4gICAgICAgIH07XG5cbiAgICAgICAgX3RoaXMzLnByb2R1Y3RzU3RhdGUgPSBmdW5jdGlvbiAoaWQsIGNob29zZVN0YXRlLCBudW0sIGluZGV4KSB7XG5cbiAgICAgICAgICAgIF90aGlzMy5zdGF0ZS5wcm9kdWN0TGlzdFtpbmRleF0uY2hvb3NlU3RhdGUgPSBjaG9vc2VTdGF0ZTtcbiAgICAgICAgICAgIF90aGlzMy5zdGF0ZS5wcm9kdWN0TGlzdFtpbmRleF0ubnVtID0gbnVtO1xuICAgICAgICAgICAgX3RoaXMzLnByb3BzLnNhdmVQcm9kdWN0bGlzdChfdGhpczMuc3RhdGUucHJvZHVjdExpc3QpO1xuICAgICAgICB9O1xuXG4gICAgICAgIF90aGlzMy5tb3ZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8g5YGa5Liq5Yqo55S75pWI5p6c6K+V6K+VXG4gICAgICAgICAgICBfdGhpczMuc3RhdGUuY2xpZW50V2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7XG4gICAgICAgICAgICBfdGhpczMuc3RhdGUuZGlyZWN0b3IgPSBfdGhpczMuc3RhdGUuZGlyZWN0b3IgKiAtMTtcbiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKF90aGlzMy5zdGF0ZS5yZXF1ZXN0SUQpO1xuICAgICAgICAgICAgX3RoaXMzLnN0YXRlLm1vdmluZyA9IHRydWU7XG4gICAgICAgICAgICBfdGhpczMuZ2V0TW92ZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIF90aGlzMy5nZXRNb3ZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMzLnN0YXRlLnJlcXVlc3RJRCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMzLnN0YXRlLm51bSA9IF90aGlzMy5zdGF0ZS5kaXJlY3RvciAqIDQgKyBfdGhpczMuc3RhdGUubnVtO1xuICAgICAgICAgICAgICAgIF90aGlzMy5zZXRTdGF0ZSh7IGxlZnQ6IF90aGlzMy5zdGF0ZS5udW0gKyAncHgnIH0pO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpczMuc3RhdGUubnVtID49IF90aGlzMy5zdGF0ZS5jbGllbnRXaWR0aCAtIDEwMCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczMuc3RhdGUuZGlyZWN0b3IgPSBfdGhpczMuc3RhdGUuZGlyZWN0b3IgKiAtMTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzMy5zdGF0ZS5udW0gPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczMuc3RhdGUuZGlyZWN0b3IgPSBfdGhpczMuc3RhdGUuZGlyZWN0b3IgKiAtMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMzLmdldE1vdmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBfdGhpczM7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKE1haW4sIFt7XG4gICAgICAgIGtleTogJ2dldENoaWxkQ29udGV4dCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDaGlsZENvbnRleHQoKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJlY29yZFN0YXRlOiB0aGlzLnByb3BzLnJlY29yZFN0YXRlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhuZXh0UHJvcHMpXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnNob3VsZFVwZGF0YSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMgIT09IG5leHRQcm9wcykge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gbmV4dFByb3BzLnN0YXRlLmRhdGE7XG4gICAgICAgICAgICAgICAgaWYgKG5leHRQcm9wcy5wcm9kdWNSZWNvcmQucHJvZHVjdExpc3QgJiYgdGhpcy5zdGF0ZS5wcm9kdWN0TGlzdC5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnNob3VsZFVwZGF0YSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucHJvZHVjdExpc3QgPSBuZXh0UHJvcHMucHJvZHVjUmVjb3JkLnByb2R1Y3RMaXN0O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YSAmJiBkYXRhLmRhdGEgJiYgZGF0YS5kYXRhLmRhdGEgJiYgdGhpcy5zdGF0ZS5wcm9kdWN0TGlzdC5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnNob3VsZFVwZGF0YSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gZGF0YS5kYXRhLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMubmV3UHJvZHVjdERhdGEobGlzdCk7XG4gICAgICAgICAgICAgICAgICAgIGxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5zdGF0ZS5wcm9kdWN0TGlzdFtpbmRleF0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5zdGF0ZS5wcm9kdWN0TGlzdFtpbmRleF1bJ3Byb2R1Y3ROYW1lJ10gPSBpdGVtLnByb2R1Y3RfbmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5zdGF0ZS5wcm9kdWN0TGlzdFtpbmRleF1bJ2Nob29zZVN0YXRlJ10gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5zdGF0ZS5wcm9kdWN0TGlzdFtpbmRleF1bJ2lkJ10gPSBpdGVtLnByb2R1Y3RfaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczQuc3RhdGUucHJvZHVjdExpc3RbaW5kZXhdWydudW0nXSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChuZXh0UHJvcHMucHJvZHVjUmVjb3JkLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9kdWNSZWNvcmQgPSBuZXh0UHJvcHMucHJvZHVjUmVjb3JkO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdHNTdGF0ZShwcm9kdWNSZWNvcmQuaWQsIHByb2R1Y1JlY29yZC5jaG9vc2VTdGF0ZSwgcHJvZHVjUmVjb3JkLm51bSwgcHJvZHVjUmVjb3JkLmluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudFdpbGxVcGRhdGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuICAgICAgICAgICAgLy9cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY29tcG9uZW50V2lsbE1vdW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUucGFyYW1zID0gdGhpcy5wcm9wcy5sb2NhdGlvbi5zZWFyY2g7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3Nob3VsZENvbXBvbmVudFVwZGF0ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlLnNob3VsZFVwZGF0YSB8fCB0aGlzLnN0YXRlLm1vdmluZztcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY29tcG9uZW50V2lsbFVubW91bnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnN0YXRlLnJlcXVlc3RJRCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgTW92ZURpdiA9IHsgcG9zaXRpb246ICdmaXhlZCcsIGJhY2tncm91bmRDb2xvcjogJ3JlZCcsIGhlaWdodDogJzEwMHB4Jywgd2lkdGg6ICcxMDBweCcsIHpJbmRleDogOTk5OTksIGxlZnQ6IHRoaXMuc3RhdGUubGVmdCwgYm90dG9tOiAnMCcgfTtcbiAgICAgICAgICAgIHJldHVybiBfcmVhY3QzLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbXBvbmVudF9jb250YWluZXInIH0sXG4gICAgICAgICAgICAgICAgX3JlYWN0My5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgc3R5bGU6IE1vdmVEaXYsIG9uQ2xpY2s6IHRoaXMubW92ZSB9KSxcbiAgICAgICAgICAgICAgICBfcmVhY3QzLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfbW9kdWxlcy5IZWFkZXIsIHsgZ29iYWNrOiB0cnVlLCB0aXRsZTogJ1xcdTk1MDBcXHU1NTJFXFx1NTU0NlxcdTU0QzEnLCBzYXZlOiB0cnVlLCBwYXJhbXM6IHRoaXMuc3RhdGUucGFyYW1zIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucHJvZHVjdExpc3QubGVuZ3RoID4gMCA/IF9yZWFjdDMuZGVmYXVsdC5jcmVhdGVFbGVtZW50KExpc3QsIHsgbGlzdDogdGhpcy5zdGF0ZS5wcm9kdWN0TGlzdCB9KSA6IG51bGxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gTWFpbjtcbn0oX3JlYWN0Mi5Db21wb25lbnQpKTtcblxuTWFpbi5jaGlsZENvbnRleHRUeXBlcyA9IHtcbiAgICByZWNvcmRTdGF0ZTogX3JlYWN0My5kZWZhdWx0LlByb3BUeXBlcy5hbnlcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9ICgwLCBfbW9kdWxlcy50ZW1wbGF0ZSkoe1xuICAgIGlkOiAnY2hvb3NlUHJvZHVjdHMnLCAvL+W6lOeUqOWFs+iBlOS9v+eUqOeahHJlZHV4XG4gICAgY29tcG9uZW50OiBNYWluLCAvL+aOpeaUtuaVsOaNrueahOe7hOS7tuWFpeWPo1xuICAgIHVybDogJy9zYWxlcy9zYWxlcy9wcm9kdWN0TGlzdCcsXG4gICAgZGF0YToge31cbn0pO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vfi9iYWJlbC1sb2FkZXI/cHJlc2V0c1tdPWVzMjAxNSxwcmVzZXRzW109cmVhY3QhLi9zcmMvQ29tcG9uZW50L2Nob29zZVByb2R1Y3RzLmpzeFxuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OyIsInNvdXJjZVJvb3QiOiIifQ==");
}});